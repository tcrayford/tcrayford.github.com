<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>tcrayford </title>
    <link rel="stylesheet" href="/stylesheets/master.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="screen" charset="utf-8"/>
    <script src="/javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    <link rel='alternate' type='application/rss+xml' href='http://feeds2.feedburner.com/tcrayford' />
  </head>
  <body>
    <div id='wrapper'>
      <div id='header'>
        <div id='blogtitle'>t<a href='/'>crayford</a></div>
        <div id='menu'>
          <a href='/archive.html'>Archive</a>
          <a href='/about.html'>About</a>
        </div>
      </div>
      <div id='content'>
        
<div class='home_box' id='home_left'>
  <div class='post'>
    <h1><a href='/2009/12/08/Lein-Autotest.html'>Clojure Autotest</a></h1>
    <div class='body'><p>I&#8217;ve been doing a lot of testing for a clojure side project recently, and got envious of Ruby people having nice tools. In particular I liked the coloured output and automatic test running from <a href='http://github.com/rubyphunk/rspactor' title='rspactor'>rspactor</a>.</p>

<p>I found <a href='http://github.com/mynyml/watchr' title='watchr'>watchr</a> and came up with <a href='http://gist.github.com/251881' title='watchr script'>this script</a>, which simply watches for changes to .clj files in <code>/src</code> and <code>/test</code> and runs <code>lein test</code> in the shell window.</p>

<p>To get started, install watchr</p>

<pre><code>gem install watchr</code></pre>

<p>and run the script in the home directory for your Leiningen-backed clojure project.</p>

<pre><code>watchr /path/to/script</code></pre>

<p>The script also does some (very basic) red/green colouring of outputs using zsh color codes.</p>

<p>Sample output: <img src='/files/lein-autotest.png' alt='Sample output' /></p></div>
  </div>
</div>


<script type="text/javascript" charset="utf-8">
  $.githubUser('tcrayford', function(data) {
    $('#github-projects').html('');
    
    var repos = data.user.repositories;
    repos.sort(function(a,b) {
      return b.watchers - a.watchers;
    });
    
    $(repos.slice(0,6)).each(function() {
      $('#github-projects').append("\
<div class='repo'>\
  <h3><a href='" + this.url + "'>" + this.name + "</a></h3>\
  <span class='desc'>"+this.description+"</span>\
</div>");
    });
  });
</script>
        <div class='clearfix'></div>
      </div>

      <div id='footer'>
        Â© 2009 Tom Crayford. Some rights reserved
      </div>
    </div>
  </body>
  <!-- Start of StatCounter Code -->
  <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-6473410-2");
      pageTracker._trackPageview();
    } catch(err) {}</script>
</html>
